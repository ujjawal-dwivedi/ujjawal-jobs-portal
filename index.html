<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ujjawal Jobs Portal</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; margin: 0; padding: 0; }
    header { background: #007bff; color: white; padding: 15px; text-align: center; font-size: 24px; position: relative; }
    .job-card, .admin-card { background: white; padding: 15px; margin: 10px auto; width: 90%; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    input, textarea, button { width: 100%; margin: 8px 0; padding: 10px; border: 1px solid #ccc; border-radius: 5px; }
    button { background: #007bff; color: white; border: none; }
    button:hover { background: #0056b3; }
    .admin-only { display: none; }
    .ads { text-align: center; margin: 20px 0; }
    .admin-toggle-btn { position: absolute; left: 10px; top: 10px; background: #fff; color: #007bff; padding: 5px 10px; border-radius: 5px; border: none; font-size: 14px; cursor: pointer; z-index: 999; }
  </style>
</head>
<body><header>
  Ujjawal Jobs Portal
  <button class="admin-toggle-btn" onclick="toggleLoginSection()">Admin Login</button>
</header><!-- Google AdSense --><div class="ads">
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-1234567890"
       data-ad-slot="1234567890"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" crossorigin="anonymous"></script>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div><!-- Job Listings --><div id="jobListings"></div><!-- Login Section --><div class="admin-card" id="loginSection" style="display:none;">
  <h3>Admin Login</h3>
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div><!-- Admin Panel --><div class="admin-card admin-only" id="adminPanel" style="display:none;">
  <h3>Post a Job</h3>
  <input type="text" id="title" placeholder="Job Title">
  <textarea id="description" placeholder="Job Description"></textarea>
  <input type="text" id="link" placeholder="Apply Link">
  <button onclick="postJob()">Post Job</button>
  <button onclick="logout()" style="background:#dc3545;">Logout</button>
</div><div id="adminJobs" class="admin-only"></div><!-- Firebase SDK --><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script><script>
  const firebaseConfig = {
    apiKey: "AIzaSyAoFhagNEBJuZXPvQo9SdX0bgxrcO-L-Tc",
    authDomain: "ujjawal-jobs-portal.firebaseapp.com",
    projectId: "ujjawal-jobs-portal",
    storageBucket: "ujjawal-jobs-portal.firebasestorage.app",
    messagingSenderId: "746809559960",
    appId: "1:746809559960:web:3bedd90b3e0e87b5ed39ed",
    measurementId: "G-R1EBJHZ8KP"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  function toggleLoginSection() {
    const loginSection = document.getElementById("loginSection");
    if (loginSection.style.display === "none") {
      loginSection.style.display = "block";
    } else {
      loginSection.style.display = "none";
    }
  }

  function login() {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    auth.signInWithEmailAndPassword(email, password)
      .then(() => {
        document.getElementById("loginSection").style.display = "none";
        document.querySelectorAll(".admin-only").forEach(el => el.style.display = "block");
        fetchJobs();
      })
      .catch(error => alert(error.message));
  }

  function logout() {
    auth.signOut().then(() => {
      document.querySelectorAll(".admin-only").forEach(el => el.style.display = "none");
    });
  }

  function postJob() {
    const title = document.getElementById("title").value;
    const description = document.getElementById("description").value;
    const link = document.getElementById("link").value;
    db.collection("jobs").add({ title, description, link })
      .then(() => {
        alert("Job posted!");
        fetchJobs();
        document.getElementById("title").value = "";
        document.getElementById("description").value = "";
        document.getElementById("link").value = "";
      });
  }

  function fetchJobs() {
    const jobListings = document.getElementById("jobListings");
    const adminJobs = document.getElementById("adminJobs");
    jobListings.innerHTML = "";
    adminJobs.innerHTML = "";
    db.collection("jobs").get().then(snapshot => {
      snapshot.forEach(doc => {
        const job = doc.data();
        const jobHTML = `<div class='job-card'><h4>${job.title}</h4><p>${job.description}</p><a href='${job.link}' target='_blank'>Apply Now</a></div>`;
        jobListings.innerHTML += jobHTML;
        adminJobs.innerHTML += `<div class='job-card'><h4>${job.title}</h4><p>${job.description}</p><a href='${job.link}' target='_blank'>Apply</a><br><button onclick=\"editJob('${doc.id}', '${job.title}', '${job.description}', '${job.link}')\">Edit</button><button onclick=\"deleteJob('${doc.id}')\">Delete</button></div>`;
      });
    });
  }

  function deleteJob(id) {
    if (confirm("Delete this job?")) {
      db.collection("jobs").doc(id).delete().then(() => {
        alert("Job deleted");
        fetchJobs();
      });
    }
  }

  function editJob(id, oldTitle, oldDesc, oldLink) {
    const title = prompt("Edit Title:", oldTitle);
    const description = prompt("Edit Description:", oldDesc);
    const link = prompt("Edit Link:", oldLink);
    if (title && description && link) {
      db.collection("jobs").doc(id).update({ title, description, link }).then(() => {
        alert("Job updated");
        fetchJobs();
      });
    }
  }

  window.onload = fetchJobs;
</script></body>
</html>
